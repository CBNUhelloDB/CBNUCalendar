<!doctype html>
<!-- navbar: https://getbootstrap.com/docs/4.0/components/navbar/  -->

<head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>

<body>
<!-- Club header section -->
  <div class="list-group">
    
<?php
include_once 'dbconfig.php';
$dbname = "events_calendar";
mysqli_select_db($conn, $dbname) or die('DB selection failed');

if (mysqli_connect_errno()) {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  exit();
}else{
  // echo "Connection successful!<br>";	
}


// get club name
$sql_club_name = "
	SELECT id, name
	FROM club
";
$result_club_name = $conn->query($sql_club_name);
$row_club_name = mysqli_fetch_array($result_club_name);

if($result_club_name->num_rows > 0){
	// output data of each row
	while($row_club_name = $result_club_name->fetch_assoc()){

	echo '<a href="'.$row_club_name["id"].'" class="list-group-item list-group-item-action flex-column align-items-start">';
	echo '<div class="d-flex w-100 justify-content-between">';
	echo '<h5 class="mb-1"><strong>Club name: </strong>' .$row_club_name["name"]. '</h5><br>';
	echo '</div>';	

	// get club manager using club id
	$sql_club_manager = "
		SELECT full_name
		FROM club
		JOIN user
		ON club.manager_id = user.id
		WHERE club.id =".$row_club_name["id"]."
	";
	$result_club_manager = $conn->query($sql_club_manager);
	$row_club_manager = mysqli_fetch_array($result_club_manager);

	echo '<strong>Club manager: </strong>' .$row_club_manager["full_name"];



	/* NOT WORKING YET
	// get members

	echo "<br>";
	echo "ok1";

	$sql_member = "
		SELECT full_name
		FROM club_member
		JOIN user
		ON club_member.user_id = user.id
		WHERE club.id = 1
	";
	echo "ok2";

	$result_member = $conn->query($sql_member);
	echo "ok3";

	$row_member = mysqli_fetch_array($result_member);
	echo "ok4";

	// echo "<br><strong>Club members (" . $row_count['count_user']-1 . "):</strong> ";

	if($result_member->num_rows > 1){
		// output data of each row
		while($row_member = $result_member->fetch_assoc()){
		echo $row_member["full_name"];
		}
	} elseif($result_member->num_rows == 1){
		echo $row_member["full_name"];
	} else {
		echo "0 results";
	}

	*/
	}
}
</body>
